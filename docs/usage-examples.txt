.. _laravel-usage-examples:

==============
Usage Examples
==============

.. facet::
   :name: genre
   :values: tutorial

.. meta::
   :keywords: set up, runnable, code example

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

Usage examples show runnable code examples to demonstrate frequently used MongoDB
operations. Each usage example includes the following components:

- Explanation of the MongoDB operation
- Example controller code that runs the MongoDB operation
- Example view code that renders the result
- Output displayed by the view

How to Use the Usage Examples
-----------------------------

To learn how to set up your application and run the usage examples, see the following
sections:

- :ref:`before-start`
- :ref:`run-usage-examples`

.. _before-start:

Before You Get Started
~~~~~~~~~~~~~~~~~~~~~~

The usage examples are designed to run operations on a MongoDB deployment that contains
the MongoDB Atlas sample datasets. When you run the example code without this sample data,
the output might not match. 

You can run the usage examples from the ``{+quickstart-app-name+}`` Laravel web application and
MongoDB Atlas cluster that you set up in the :ref:`laravel-quick-start` guide. After completing
the Quick Start, your application contains the following files:

- ``Movie.php``: defines a ``Movie`` model configured to use the MongoDB database
- ``MovieController.php``: contains controller functions to run database operations
- ``browse_movie.blade.php``: contains HTML code to view MongoDB documents
- ``api.php``: contains API routes that call controller functions

.. _run-usage-examples:

Run the Usage Example
~~~~~~~~~~~~~~~~~~~~~

Each Usage Example page includes sample code that demonstrates a MongoDB operation. You can
edit the existing files in your ``{+quickstart-app-name+}`` application to run each operation
and view the expected output. 

.. procedure::
   :style: connected

   .. step:: Add the example to your application

      To add the usage example to your ``{+quickstart-app-name+}`` application, make the following
      changes to your application files:

    - Add the code example to a controller function in the ``MovieController.php`` file
    - Add an API route that calls the controller function to the ``api.php`` file
  
   .. step:: Pass a document to the ``browse_movies`` view

      To view the modified, inserted, or retrieved document, add the following return statement to the
      ``show()`` function in ``MovieController.php``:

      .. code-block:: php

         return view('browse_movies', [
            'movies' => Movie::where(<query filter>)
               ->get()
         ]);

      Replace the ``<query filter>`` placeholder with a set of criteria that matches the document you want to
      view. For more information on specifying a query filter, see the :ref:`laravel-fundamentals-retrieve`
      guide.

   .. step:: Run the example

      To run the usage example, start your application by running the following command:

      .. code-block:: bash

         php artisan serve

   .. step:: View the expected output

      To view the operation result, open the following URL in your web browser:

      .. code-block:: bash

         http://127.0.0.1:8000/browse_movies